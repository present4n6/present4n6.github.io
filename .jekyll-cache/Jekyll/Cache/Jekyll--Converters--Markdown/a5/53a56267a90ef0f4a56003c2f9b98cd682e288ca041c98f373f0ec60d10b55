I"<h2 id="encase에서-삭제된-파티션-복구하기"><strong>EnCase에서 삭제된 파티션 복구하기</strong></h2>

<p>안녕하세요 EnCase에 대해 다루는 두번째 포스팅을 시작해보겠습니다. 타이틀을 EnCase에서 삭제된 파티션 복구하기라고 적었는데요. 사실 삭제라기 보다는 파티션을 숨겨놓았다고 해야할지..?<br />
MBR의 Partition Table 영역에서 특정 파티션에 대한 값이 지워져있을 때 인식되지 않는 파티션을 다시 인식시키는 과정을 다뤄보겠습니다.</p>

<hr />

<h3 id="1-encase에-이미지-파일-마운트"><strong>1. EnCase에 이미지 파일 마운트</strong></h3>

<p><code class="language-plaintext highlighter-rouge">EnCase Version : EnCase Forensic Training v20.2</code>
<code class="language-plaintext highlighter-rouge">Image File OS : Windows 10</code></p>

<ul>
  <li>첫 번째 포스팅에서 진행했던 것처럼 이미지 파일을 EnCase에 올려준 후 <strong><code class="language-plaintext highlighter-rouge">Tree Pane</code></strong>에서 증거 파일을 선택하고 아래 그림처럼 하단의 <strong><code class="language-plaintext highlighter-rouge">Report</code></strong> 탭을 눌러서 정보를 확인합니다. Total Size가 약 20GB로 측정이 되어 있는데 Partitions 표의 Size를 합쳐보면 약 12GB만 보이는 것을 알 수 있습니다. 이를 통해서 파티션 정보가 누락이 되어있다는 사실을 의심할 수 있습니다. 실제로 파티션이 누락되어 있는지 확인을 해보겠습니다.</li>
</ul>

<p><img src="/assets/post/EnCase/9.png" alt="upload-image" /></p>

<h3 id="2-disk-view-확인"><strong>2. Disk View 확인</strong></h3>

<ul>
  <li><strong><code class="language-plaintext highlighter-rouge">Table Pane</code></strong> 위에 보면 메뉴바가 있는데 그 중에서 <strong><code class="language-plaintext highlighter-rouge">Device</code></strong>를 클릭하고 <strong><code class="language-plaintext highlighter-rouge">Disk View</code></strong>를 눌러줍니다. Disk View에서는 이미지 파일의 데이터를 섹터 단위 혹은 클러스터 단위로 보여줍니다. 그리고 <strong><code class="language-plaintext highlighter-rouge">Ctrl+G</code></strong> 키를 통해 섹터를 자유롭게 이동할 수도 있습니다.</li>
</ul>

<p><img src="/assets/post/EnCase/10.png" alt="upload-image" /></p>

<ul>
  <li>섹터 단위로 보려면 <strong><code class="language-plaintext highlighter-rouge">View Clusters</code></strong> 항목을 체크 해제하면 됩니다. 아래 그림을 봤을 때 화면 중단에는 섹터 단위로 쭈욱 나열되어 있는 것을 볼 수 있고 특정 섹터를 클릭하게 되면 하단에서 그 섹터에 대한 Hex 값을 확인할 수 있습니다. 그리고 가장 밑의 부분에 <strong><code class="language-plaintext highlighter-rouge">PS 0 SO 32 FO 32 LE 6</code></strong> 이라는 글자가 보이는데 이는 Hex 영역에서 선택한 부분에 대한 정보를 나타내는 것입니다. 해석해보면 0번째 섹터의 32번 byte 부터 6byte 만큼 블록이 되어있다는 뜻입니다.</li>
</ul>

<p><img src="/assets/post/EnCase/11.png" alt="upload-image" /></p>

<ul>
  <li>파티션테이블의 정보를 확인하기 위해 MBR이 위치하는 0번 섹터를 선택하고 hex 값을 확인합니다. 파티션테이블의 크기인 64byte만큼 블록을 지정해주고 우측의 <strong><code class="language-plaintext highlighter-rouge">Decode-&gt;View Types-&gt;Windows-&gt;Partition Entry</code></strong>를 선택하면 표 형식으로 파티션 정보를 확인할 수 있습니다. 아래 그림을 보면 세 번째 파티션의 데이터가 없다는 것을 확인할 수 있습니다.</li>
</ul>

<p><img src="/assets/post/EnCase/12.png" alt="upload-image" /></p>

<h3 id="3-case-processor-사용하기"><strong>3. Case Processor 사용하기</strong></h3>

<ul>
  <li>파티션테이블을 보고 직접 손으로 계산해서 파티션의 시작주소를 찾는 방법도 있겠지만 <kbd>Case Processor</kbd>를 통해 파티션을 찾을 수 있습니다. 상단의 <strong><code class="language-plaintext highlighter-rouge">EnScript-&gt;Case Processor</code></strong>를 선택해주면 됩니다. 그리고 정보를 작성한 후 다음 다음 마침을 하면 화면 하단에 <strong><code class="language-plaintext highlighter-rouge">Case Processor</code></strong>의 진행표시줄 보이게 됩니다.</li>
</ul>

<p><img src="/assets/post/EnCase/13.png" alt="upload-image" /><br />
<img src="/assets/post/EnCase/14.png" alt="upload-image" /><br />
<img src="/assets/post/EnCase/15.png" alt="upload-image" /></p>

<ul>
  <li><strong><code class="language-plaintext highlighter-rouge">Case Processor</code></strong> 작업이 완료되면 상단의 <strong><code class="language-plaintext highlighter-rouge">View-&gt;Bookmarks</code></strong>에서 결과를 확인할 수 있습니다. 아래 그림과 같이 아까 입력했던 <strong><code class="language-plaintext highlighter-rouge">삭제된 파티션의 VBR정보 찾기 결과</code></strong>가 있는 것을 알 수 있습니다. 이것을 더블클릭하면 안에 <strong><code class="language-plaintext highlighter-rouge">Partition Finder</code></strong>가 있고 그 안에 올렸던 이미지 파일의 폴더가 있습니다. 다시 이 폴더에 들어가면 <strong><code class="language-plaintext highlighter-rouge">Case Processor</code></strong>가 찾은 파티션들의 정보가 나타나있습니다.</li>
</ul>

<p><img src="/assets/post/EnCase/16.png" alt="upload-image" /><br />
<img src="/assets/post/EnCase/17.png" alt="upload-image" /></p>
:ET